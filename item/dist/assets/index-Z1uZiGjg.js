import{a as Q,r as f,N as W,X as Y,H as Z,a2 as ee,b as i,d as te,o as k,c as x,f as e,h as t,g as l,k as u,l as h,z as ae,x as F,e as le,M as oe,A as ne,E as ie,a3 as re,a4 as se,a5 as de,t as ue}from"./index-Dom6VubR.js";import{U as pe}from"./UsePagination-DJeUD4p2.js";const me={class:"app-container table-height-auto"},ce={class:"dialog-footer"},fe=ie({name:"Dict"}),ye=Object.assign(fe,{setup(_e){const{initData:S,dataList:U,pageSearch:$,total:V,pageConfig:c,tableLoading:z,pageRefresh:_}=pe(),B=Q(),{proxy:p}=ue(),N=f([{label:"字典名称",prop:"name",type:"FormInput",placeholder:"请输入字典名称"},{label:"字典类型",prop:"type",type:"FormInput",placeholder:"请输入字典类型"}]),s=f(!1),g=f(!1),v=f(""),P=W({form:{},rules:{name:[{required:!0,message:"字典名称不能为空",trigger:"blur"}],type:[{required:!0,message:"字典类型不能为空",trigger:"blur"}]}}),{form:o,rules:R}=Y(P);function T(){s.value=!1,y()}function y(){o.value={id:void 0,name:void 0,type:void 0,remark:void 0},p.resetForm("ruleForm")}function q(){y(),s.value=!0,v.value="添加字典"}function E(r){y(),o.value={...r},s.value=!0,v.value="修改字典"}async function I(){await p.$refs.ruleForm.validate(),g.value=!0;try{!o.value.id&&await re(o.value),o.value.id&&await se(o.value),p.$modal.msgSuccess(o.value.id?"修改成功":"新增成功"),s.value=!1,_()}finally{g.value=!1}}async function A(r){await p.$modal.confirm(`是否删除字典：${r.name}？`),await de({id:r.id}),_(),p.$modal.msgSuccess("删除成功")}function L(r){B.push({path:"/system/dict/dictData",query:{id:r.id}})}return Z(()=>{S(ee)}),(r,n)=>{const M=i("FormScreen"),m=i("el-button"),d=i("el-table-column"),O=i("View"),j=i("el-icon"),H=i("el-link"),X=i("el-table"),G=i("pagination"),b=i("el-input"),w=i("el-form-item"),J=i("el-form"),K=i("el-dialog"),C=te("loading");return k(),x("div",me,[e(M,{options:t(N),onSearch:t($)},null,8,["options","onSearch"]),e(m,{type:"primary",plain:"",icon:"Plus",onClick:q,class:"mb10"},{default:l(()=>[u("新增")]),_:1}),h((k(),ae(X,{data:t(U)},{default:l(()=>[e(d,{label:"字典编号",align:"center",prop:"id"}),e(d,{label:"字典名称",align:"center",prop:"name","show-overflow-tooltip":!0}),e(d,{label:"字典类型",align:"center"},{default:l(a=>[e(H,{type:"primary",onClick:D=>L(a.row)},{default:l(()=>[u(F(a.row.type)+" ",1),e(j,{style:{"margin-left":"10px"}},{default:l(()=>[e(O)]),_:1})]),_:2},1032,["onClick"])]),_:1}),e(d,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),e(d,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:l(a=>[le("span",null,F(r.parseTime(a.row.createTime)),1)]),_:1}),e(d,{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},{default:l(a=>[e(m,{link:"",size:"small",type:"primary",icon:"Edit",onClick:D=>E(a.row)},{default:l(()=>[u("修改")]),_:2},1032,["onClick"]),e(m,{link:"",size:"small",type:"danger",icon:"Delete",onClick:D=>A(a.row)},{default:l(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[C,t(z)]]),h(e(G,{total:t(V),page:t(c).page,"onUpdate:page":n[0]||(n[0]=a=>t(c).page=a),limit:t(c).size,"onUpdate:limit":n[1]||(n[1]=a=>t(c).size=a),onPagination:t(_)},null,8,["total","page","limit","onPagination"]),[[oe,t(V)>0]]),e(K,{title:t(v),modelValue:t(s),"onUpdate:modelValue":n[5]||(n[5]=a=>ne(s)?s.value=a:null),width:"500px","append-to-body":""},{footer:l(()=>[h((k(),x("div",ce,[e(m,{onClick:T},{default:l(()=>[u("取 消")]),_:1}),e(m,{type:"primary",onClick:I},{default:l(()=>[u("确 定")]),_:1})])),[[C,t(g)]])]),default:l(()=>[e(J,{ref:"ruleForm",model:t(o),rules:t(R),"label-width":"80px"},{default:l(()=>[e(w,{label:"字典名称",prop:"name"},{default:l(()=>[e(b,{modelValue:t(o).name,"onUpdate:modelValue":n[2]||(n[2]=a=>t(o).name=a),placeholder:"请输入字典名称"},null,8,["modelValue"])]),_:1}),e(w,{label:"字典类型",prop:"type"},{default:l(()=>[e(b,{modelValue:t(o).type,"onUpdate:modelValue":n[3]||(n[3]=a=>t(o).type=a),placeholder:"请输入字典类型"},null,8,["modelValue"])]),_:1}),e(w,{label:"备注",prop:"remark"},{default:l(()=>[e(b,{modelValue:t(o).remark,"onUpdate:modelValue":n[4]||(n[4]=a=>t(o).remark=a),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{ye as default};
