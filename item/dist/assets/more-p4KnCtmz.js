import{r as f,N as O,X as T,H as q,ah as A,b as i,d as H,o as v,c as V,f as a,h as e,g as t,k as s,l as b,z as X,x as G,M as J,A as K,E as Q,ai as W,aj as Y,ak as Z,t as ee}from"./index-Dom6VubR.js";import{U as ae}from"./UsePagination-DJeUD4p2.js";const le={class:"app-container table-height-auto"},te={class:"dialog-footer"},oe=Q({name:"More"}),se=Object.assign(oe,{setup(ne){const{initData:h,dataList:x,pageSearch:S,total:k,pageConfig:p,tableLoading:$,pageRefresh:_}=ae(),{proxy:c}=ee(),D=f([{label:"账户名称",prop:"name",type:"FormInput",placeholder:"请输入账户名称"}]),r=f(!1),g=f(!1);f("");const M=O({form:{},rules:{name:[{required:!0,message:"请输入账号名称",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}}),{form:o,rules:U}=T(M);async function F(){await c.$refs.ruleForm.validate();try{g.value=!0,!o.value.id&&await W(o.value),o.value.id&&await Y(o.value),c.$modal.msgSuccess(o.value.id?"修改成功":"新增成功"),r.value=!1,_()}finally{g.value=!1}}function z(){o.value={},r.value=!0}function E(m){o.value={...m},r.value=!0}async function P(m){await c.$modal.confirm(`是否删除多账号：${m.name}？`),await Z({id:m.id}),_(),c.$modal.msgSuccess("删除成功")}return q(()=>{h(A)}),(m,n)=>{const B=i("FormScreen"),u=i("el-button"),d=i("el-table-column"),N=i("el-table"),R=i("pagination"),y=i("el-input"),w=i("el-form-item"),j=i("el-form"),I=i("el-dialog"),C=H("loading");return v(),V("div",le,[a(B,{options:e(D),onSearch:e(S)},null,8,["options","onSearch"]),a(u,{class:"mb10",icon:"Plus",type:"primary",plain:"",onClick:z},{default:t(()=>[s("添加账号")]),_:1}),b((v(),X(N,{data:e(x)},{default:t(()=>[a(d,{label:"编号",align:"center",prop:"id"}),a(d,{label:"账号名称",align:"center",prop:"name"},{default:t(l=>[s(G(l.row.name),1)]),_:1}),a(d,{label:"备注",align:"center",prop:"remark"}),a(d,{label:"创建时间",align:"center",prop:"createTime"}),a(d,{align:"center",label:"操作"},{default:t(l=>[a(u,{link:"",size:"small",type:"primary",icon:"Edit",onClick:L=>E(l.row)},{default:t(()=>[s("修改")]),_:2},1032,["onClick"]),a(u,{link:"",size:"small",type:"danger",icon:"Delete",onClick:L=>P(l.row)},{default:t(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[C,e($)]]),b(a(R,{total:e(k),page:e(p).page,"onUpdate:page":n[0]||(n[0]=l=>e(p).page=l),limit:e(p).size,"onUpdate:limit":n[1]||(n[1]=l=>e(p).size=l),onPagination:e(_)},null,8,["total","page","limit","onPagination"]),[[J,e(k)>0]]),a(I,{title:"多账号管理",modelValue:e(r),"onUpdate:modelValue":n[5]||(n[5]=l=>K(r)?r.value=l:null),width:"40%"},{footer:t(()=>[b((v(),V("div",te,[a(u,{onClick:n[4]||(n[4]=l=>r.value=!1)},{default:t(()=>[s("取 消")]),_:1}),a(u,{type:"primary",onClick:F},{default:t(()=>[s("确 定")]),_:1})])),[[C,e(g)]])]),default:t(()=>[a(j,{class:"demo-form-inline","label-width":"80px",model:e(o),rules:e(U),ref:"ruleForm"},{default:t(()=>[a(w,{label:"账号名称",prop:"name"},{default:t(()=>[a(y,{modelValue:e(o).name,"onUpdate:modelValue":n[2]||(n[2]=l=>e(o).name=l),placeholder:"请输入账号名称"},null,8,["modelValue"])]),_:1}),a(w,{label:"备注说明"},{default:t(()=>[a(y,{modelValue:e(o).remark,"onUpdate:modelValue":n[3]||(n[3]=l=>e(o).remark=l),type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{se as default};
