import{_ as J,r as v,H as T,b as s,d as A,o as f,c as y,f as t,h as e,g as o,k as p,l as k,z as H,F as M,C as j,x as q,M as G,e as K,A as C,t as Q}from"./index-Dom6VubR.js";import{b as W,U as X,c as Y,e as Z,f as ee}from"./index-AsNyoiPZ.js";import{U as te}from"./UsePagination-DJeUD4p2.js";const ae={class:"app-container table-height-auto"},le={class:"flex-box"},ne={class:"dialog-footer"},oe={__name:"file",setup(ie){const{initData:F,dataList:U,pageSearch:V,total:w,pageConfig:_,tableLoading:$,pageRefresh:b}=te(),{proxy:c}=Q(),z=v([{label:"编号",prop:"id",type:"FormInput",placeholder:"请输入编号"}]),i=v(!1),h=v(!1),r=v([]);let d;function D(){i.value=!0,d=void 0,r.value=""}function N(l){i.value=!0,d=l.id,r.value=S(l)}async function O(){const l=r.value;if(l.length===0)return c.$modal.msgError("请上传文件！！！");try{h.value=!0,!d&&await Y({type:2,val:JSON.stringify(l)}),d&&await Z({id:d,val:JSON.stringify(l)}),b(),c.$modal.msgSuccess(d?"修改成功":"新增成功"),i.value=!1}finally{h.value=!1}}async function B(l){await c.$modal.confirm("确认删除当前文件数据吗？"),await ee({id:l.id}),b(),c.$modal.msgSuccess("删除成功")}function S(l){try{return JSON.parse(l.val)}catch{return[]}}return T(()=>{F(W)}),(l,n)=>{const E=s("FormScreen"),u=s("el-button"),g=s("el-table-column"),I=s("el-link"),L=s("el-table"),P=s("pagination"),R=s("el-dialog"),x=A("loading");return f(),y("div",ae,[t(E,{options:e(z),onSearch:e(V)},null,8,["options","onSearch"]),t(u,{type:"primary",plain:"",icon:"Plus",onClick:D,class:"mb10"},{default:o(()=>[p("新增文件")]),_:1}),k((f(),H(L,{data:e(U)},{default:o(()=>[t(g,{label:"编号",align:"center",prop:"id",width:"100"}),t(g,{label:"文件",align:"center",prop:"dictSort"},{default:o(a=>[(f(!0),y(M,null,j(S(a.row),m=>(f(),y("div",{key:m.id},[t(I,{type:"primary",target:"_blank",href:e(c).fileHost+m.url},{default:o(()=>[p(q(m.name),1)]),_:2},1032,["href"])]))),128))]),_:1}),t(g,{label:"创建时间",align:"center",prop:"createTime",width:"180"}),t(g,{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},{default:o(a=>[t(u,{link:"",size:"small",type:"primary",icon:"Edit",onClick:m=>N(a.row)},{default:o(()=>[p("修改")]),_:2},1032,["onClick"]),t(u,{link:"",size:"small",type:"danger",icon:"Delete",onClick:m=>B(a.row)},{default:o(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[x,e($)]]),k(t(P,{total:e(w),page:e(_).page,"onUpdate:page":n[0]||(n[0]=a=>e(_).page=a),limit:e(_).size,"onUpdate:limit":n[1]||(n[1]=a=>e(_).size=a),onPagination:e(b)},null,8,["total","page","limit","onPagination"]),[[G,e(w)>0]]),t(R,{title:"文件上传",modelValue:e(i),"onUpdate:modelValue":n[4]||(n[4]=a=>C(i)?i.value=a:null),width:"600px","append-to-body":""},{footer:o(()=>[K("div",le,[t(X,{modelValue:e(r),"onUpdate:modelValue":n[2]||(n[2]=a=>C(r)?r.value=a:null),runType:"arrayObj","list-type":"text",multiple:"",limit:3,size:1},null,8,["modelValue"])]),k((f(),y("div",ne,[t(u,{onClick:n[3]||(n[3]=a=>i.value=!1)},{default:o(()=>[p("取 消")]),_:1}),t(u,{type:"primary",onClick:O},{default:o(()=>[p("保 存")]),_:1})])),[[x,e(h)]])]),_:1},8,["modelValue"])])}}},pe=J(oe,[["__scopeId","data-v-499b428c"]]);export{pe as default};
