import{a as oe,u as ne,r as f,v as ue,N as re,X as se,H as ie,b as r,d as de,o as s,c as g,f as l,h as o,g as a,k as i,l as U,z as V,x as w,e as ce,F as $,C as L,A as me,E as pe,Y as fe,Z as _e,$ as be,a0 as ve,t as ge,a1 as ye}from"./index-Dom6VubR.js";const Ve={class:"app-container table-height-auto"},we={key:0},ke={class:"dialog-footer"},Ce=pe({name:"DictData"}),Fe=Object.assign(Ce,{setup(De){oe();const q=ne(),{proxy:_}=ge(),S=f([]),k=f([]),d=f(!1),p=f(!1),C=f(""),A=Number(q.query.id),D=f(""),R=[{value:"default",label:"默认"},{value:"primary",label:"主要"},{value:"success",label:"成功"},{value:"info",label:"信息"},{value:"warning",label:"警告"},{value:"danger",label:"危险"}],B=[{dictLabel:"显示",dictValue:1},{dictLabel:"隐藏",dictValue:0}],O=ue(()=>[{label:"归属字典",prop:"dictId",type:"FormSelect",options:k.value,keyLabel:"name",keyValue:"id",modelValue:A,clearable:!1,placeholder:"请选择归属字典"},{label:"字典项目标签",prop:"label",type:"FormInput",placeholder:"请输入字典项目标签"},{label:"字典项目键值",prop:"value",type:"FormInput",placeholder:"请输入字典项目键值"}]),T=re({form:{},queryParams:{},rules:{label:[{required:!0,message:"数据标签不能为空",trigger:"blur"}],value:[{required:!0,message:"数据键值不能为空",trigger:"blur"}],dictSort:[{required:!0,message:"数据顺序不能为空",trigger:"blur"}]}}),{queryParams:b,form:t,rules:z}=se(T);async function h(){p.value=!0;try{let{data:u}=await ye(b.value);S.value=u}finally{p.value=!1}}async function E(){let{data:u}=await fe();k.value=u,N()}function P(){d.value=!1,F()}function F(){t.value={dictId:b.value.dictId,dictName:D.value,label:void 0,value:void 0,dictSort:0,dictClass:void 0,status:1,remark:void 0},_.resetForm("ruleForm")}function j(u){b.value={...b.value,...u},h(),N()}const N=()=>{let u=k.value.filter(n=>n.id==b.value.dictId);D.value=u.length==0?"":u[0].name};function G(){F(),d.value=!0,C.value="添加字典项目"}function H(u){F(),t.value={...u},t.value.dictName=D.value,d.value=!0,C.value="修改字典项目"}async function M(){await _.$refs.ruleForm.validate(),p.value=!0;try{!t.value.id&&await _e(t.value),t.value.id&&await be(t.value),_.$modal.msgSuccess(t.value.id?"修改成功":"新增成功"),d.value=!1,h()}finally{p.value=!1}}async function X(u){await _.$modal.confirm(`是否删除字典项目：${u.label}？`),await ve({id:u.id}),h(),_.$modal.msgSuccess("删除成功")}return ie(async()=>{await E()}),(u,n)=>{const Y=r("FormScreen"),v=r("el-button"),I=r("el-tag"),c=r("el-table-column"),Z=r("el-table"),y=r("el-input"),m=r("el-form-item"),J=r("el-input-number"),K=r("el-option"),Q=r("el-select"),W=r("el-radio"),ee=r("el-radio-group"),le=r("el-form"),ae=r("el-dialog"),x=de("loading");return s(),g("div",Ve,[l(Y,{options:o(O),onSearch:j,initGetFormData:"",showRefresh:!1},null,8,["options"]),l(v,{type:"primary",plain:"",icon:"Plus",onClick:G,class:"mb10"},{default:a(()=>[i("新增")]),_:1}),U((s(),V(Z,{data:o(S)},{default:a(()=>[l(c,{label:"字典项目标签",align:"center",prop:"label"},{default:a(e=>[e.row.dictClass==""||e.row.dictClass=="default"?(s(),g("span",we,w(e.row.label),1)):(s(),V(I,{key:1,type:e.row.dictClass=="primary"?"":e.row.dictClass},{default:a(()=>[i(w(e.row.label),1)]),_:2},1032,["type"]))]),_:1}),l(c,{label:"字典项目键值",align:"center",prop:"value"}),l(c,{label:"字典项目排序",align:"center",prop:"dictSort"}),l(c,{label:"状态",align:"center",prop:"status"},{default:a(e=>[e.row.status==1?(s(),V(I,{key:0},{default:a(()=>[i("显示")]),_:1})):(s(),V(I,{key:1,type:"danger"},{default:a(()=>[i("隐藏")]),_:1}))]),_:1}),l(c,{label:"备注",align:"center",prop:"remark","show-overflow-tooltip":!0}),l(c,{label:"创建时间",align:"center",prop:"createTime",width:"180"},{default:a(e=>[ce("span",null,w(u.parseTime(e.row.createTime)),1)]),_:1}),l(c,{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},{default:a(e=>[l(v,{link:"",size:"small",type:"primary",icon:"Edit",onClick:te=>H(e.row)},{default:a(()=>[i("修改")]),_:2},1032,["onClick"]),l(v,{link:"",size:"small",type:"danger",icon:"Delete",onClick:te=>X(e.row)},{default:a(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[x,o(p)]]),l(ae,{title:o(C),modelValue:o(d),"onUpdate:modelValue":n[7]||(n[7]=e=>me(d)?d.value=e:null),width:"600px","append-to-body":""},{footer:a(()=>[U((s(),g("div",ke,[l(v,{onClick:P},{default:a(()=>[i("取 消")]),_:1}),l(v,{type:"primary",onClick:M},{default:a(()=>[i("确 定")]),_:1})])),[[x,o(p)]])]),default:a(()=>[l(le,{ref:"ruleForm",model:o(t),rules:o(z),"label-width":"100px"},{default:a(()=>[l(m,{label:"归属字典",prop:"dictName"},{default:a(()=>[l(y,{modelValue:o(t).dictName,"onUpdate:modelValue":n[0]||(n[0]=e=>o(t).dictName=e),disabled:!0},null,8,["modelValue"])]),_:1}),l(m,{label:"数据标签",prop:"label"},{default:a(()=>[l(y,{modelValue:o(t).label,"onUpdate:modelValue":n[1]||(n[1]=e=>o(t).label=e),placeholder:"请输入数据标签"},null,8,["modelValue"])]),_:1}),l(m,{label:"数据键值",prop:"value"},{default:a(()=>[l(y,{modelValue:o(t).value,"onUpdate:modelValue":n[2]||(n[2]=e=>o(t).value=e),placeholder:"请输入数据键值"},null,8,["modelValue"])]),_:1}),l(m,{label:"显示排序",prop:"dictSort"},{default:a(()=>[l(J,{modelValue:o(t).dictSort,"onUpdate:modelValue":n[3]||(n[3]=e=>o(t).dictSort=e),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),l(m,{label:"回显样式",prop:"listClass"},{default:a(()=>[l(Q,{modelValue:o(t).dictClass,"onUpdate:modelValue":n[4]||(n[4]=e=>o(t).dictClass=e)},{default:a(()=>[(s(),g($,null,L(R,e=>l(K,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"状态",prop:"status"},{default:a(()=>[l(ee,{modelValue:o(t).status,"onUpdate:modelValue":n[5]||(n[5]=e=>o(t).status=e)},{default:a(()=>[(s(),g($,null,L(B,e=>l(W,{key:e.dictValue,label:e.dictValue},{default:a(()=>[i(w(e.dictLabel),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"备注",prop:"remark"},{default:a(()=>[l(y,{modelValue:o(t).remark,"onUpdate:modelValue":n[6]||(n[6]=e=>o(t).remark=e),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Fe as default};
