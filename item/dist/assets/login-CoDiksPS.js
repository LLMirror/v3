import{_ as M,u as N,a as R,r as m,w as S,b as _,d as B,o as b,c as V,e as i,f as e,g as o,h as s,i as D,j as g,k as q,l as F,m as L,p as T,n as U,q as j,s as H,t as P}from"./index-Dom6VubR.js";import{m as $}from"./md5-Dj8Aq7FI.js";const A=d=>(T("data-v-fc0bcff4"),d=d(),U(),d),E={class:"login-wrap"},O={class:"ms-login"},Q=A(()=>i("div",{class:"ms-title"},"系统登陆",-1)),z={class:"captcha-box"},G=["innerHTML"],J={class:"login-btn"},W={__name:"login",setup(d){const v=N(),C=R(),{proxy:k}=P(),t=m({name:"admin",pwd:"666666",captcha:""}),x={name:[{required:!0,trigger:"blur",message:"请输入您的账号"}],pwd:[{required:!0,trigger:"blur",message:"请输入您的密码"}],captcha:[{required:!0,trigger:"blur",message:"请输入验证码"}]},y=m(""),f=m(!1),w=m(void 0);S(v,a=>{w.value=a.query&&a.query.redirect},{immediate:!0});async function p(){let{data:a}=await D();y.value=a}async function u(){await k.$refs.loginFormRef.validate(),f.value=!0;try{await j({...t.value,pwd:$(H()+t.value.pwd)});const a=v.query,n=Object.keys(a).reduce((l,r)=>(r!=="redirect"&&(l[r]=a[r]),l),{});C.push({path:w.value||"/",query:n})}catch{f.value=!1,p()}}return p(),(a,n)=>{const l=_("el-button"),r=_("el-input"),h=_("el-form-item"),K=_("el-form"),I=B("loading");return b(),V("div",E,[i("div",O,[Q,e(K,{model:s(t),rules:x,ref:"loginFormRef","label-width":"0px",class:"ms-content"},{default:o(()=>[e(h,{prop:"name"},{default:o(()=>[e(r,{modelValue:s(t).name,"onUpdate:modelValue":n[0]||(n[0]=c=>s(t).name=c),placeholder:"用户名",onKeyup:g(u,["enter","native"]),clearable:""},{default:o(()=>[e(l,{slot:"prepend",icon:"el-icon-user-solid"})]),_:1},8,["modelValue","onKeyup"])]),_:1}),e(h,{prop:"pwd"},{default:o(()=>[e(r,{type:"password",placeholder:"密码",modelValue:s(t).pwd,"onUpdate:modelValue":n[1]||(n[1]=c=>s(t).pwd=c),onKeyup:g(u,["enter","native"]),clearable:""},{default:o(()=>[e(l,{slot:"prepend",icon:"el-icon-question"})]),_:1},8,["modelValue","onKeyup"])]),_:1}),e(h,{prop:"captcha"},{default:o(()=>[i("div",z,[e(r,{class:"captcha-input",type:"captcha",placeholder:"请输入验证码",modelValue:s(t).captcha,"onUpdate:modelValue":n[2]||(n[2]=c=>s(t).captcha=c),onKeyup:g(u,["enter","native"]),clearable:""},{default:o(()=>[e(l,{slot:"prepend"},{default:o(()=>[q("验证码")]),_:1})]),_:1},8,["modelValue","onKeyup"]),i("div",{class:"captcha-svg",onClick:p,innerHTML:s(y)},null,8,G),i("div",{class:"captcha-hint",onClick:p},"看不清？点击更换")])]),_:1}),F((b(),V("div",J,[e(l,{type:"primary",onClick:L(u,["prevent"])},{default:o(()=>[q("登录")]),_:1},8,["onClick"])])),[[I,s(f)]])]),_:1},8,["model"])])])}}},Z=M(W,[["__scopeId","data-v-fc0bcff4"]]);export{Z as default};
